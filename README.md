# Go + JavaScript 天気予報アプリ

## 概要

このプロジェクトは、Go言語で作成したバックエンドAPIサーバーと、JavaScript (HTML/CSS) で作成したフロントエンドを組み合わせたシンプルな天気予報Webアプリケーションです。気象庁の公開データを利用して、日本の主要都市の天気情報を表示します。

このリポジトリは、GoとJavaScriptを使ったWebアプリケーション開発の学習プロセスを通じて作成されました。

## 機能

* **バックエンドAPI (Go)**:
    * 設定された日本の主要都市（東京、大阪、札幌、仙台、名古屋、岡山、福岡、那覇）の天気予報データを気象庁から取得します。
    * サーバー起動時に初期データを取得し、その後は**1時間ごと**にデータを自動で更新します。
    * `/api/weather` エンドポイントにて、サーバーが保持している全都市の天気情報リストをJSON形式で提供します。
    * CORS（Cross-Origin Resource Sharing）に対応しており、異なるオリジン（場所）で動作するフロントエンドからのアクセスを許可します。
* **フロントエンド (HTML/JavaScript)**:
    * バックエンドAPI (`/api/weather`) にアクセスして、天気情報を非同期で取得します。
    * 取得した各都市の天気情報を**カード形式**で**グリッドレイアウト**表示します。
    * 天気に応じて簡単な**絵文字アイコン**を表示します。
    * 基本的なローディング表示（テキスト）とエラーハンドリングを備えています。

## 技術スタック

* **バックエンド**: Go言語 (標準ライブラリ `net/http`, `encoding/json`, `time` 等を使用)
* **フロントエンド**: HTML, CSS, JavaScript (Fetch API, DOM操作)
* **データソース**: [気象庁 防災情報提供センター](https://www.jma.go.jp/bosai/) の予報データ (JSON形式)

## セットアップと実行方法

### 前提条件

* Go言語の実行環境 ([https://golang.org/](https://golang.org/)) がインストールされていること。

### 実行手順

1.  **ファイルの準備**:
    `main.go` と `index.html` ファイルを同じディレクトリ（フォルダ）に配置します。

2.  **バックエンドサーバーの起動**:
    ターミナル（コマンドプロンプトなど）を開き、`main.go` があるディレクトリに移動して、以下のコマンドを実行します。
    ```bash
    go run main.go
    ```
    コンソールに「天気予報APIサーバーをポート 8080 で起動します...」といったログが表示されれば、サーバーは正常に起動しています。初回データ取得と、1時間ごとの自動更新処理がバックグラウンドで開始されます。

3.  **フロントエンドへのアクセス**:
    バックエンドサーバーが起動している状態で、同じディレクトリにある `index.html` ファイルをWebブラウザで開きます。（ファイルをダブルクリックするか、ブラウザのアドレスバーに `file:///...` のパスを入力します）
    ページが表示され、「天気情報を読み込み中...」の後、各都市の天気情報カードが表示されます。

4.  **APIの直接確認 (任意)**:
    Webブラウザで `http://localhost:8080/api/weather` にアクセスすると、バックエンドが提供しているJSONデータそのものを確認できます。

5.  **サーバーの停止**:
    バックエンドサーバーを実行しているターミナルで `Ctrl + C` を押すと、サーバーが停止します。

## APIエンドポイント

* **`GET /api/weather`**
    * **説明**: サーバーが現在保持している主要都市の天気情報リストを取得します。データは1時間ごとにバックエンドで自動更新されます。
    * **レスポンス形式**: JSON
    * **レスポンス例**:
        ```json
        {
          "cityWeather": [
            {
              "areaCode": "130000", // リクエストに使われたエリアコード
              "reportTime": "2025-04-25 11:00", // 発表日時
              "areaName": "東京地方",          // 予報区名
              "todayWeather": "くもり　所により　雨", // 今日の天気
              "tomorrowWeather": "晴れ...",      // 明日の天気
              "tempAreaName": "東京",           // 気温の地点名
              "tempTodayHigh": "22",          // 今日の最高気温(℃)
              "tempTmrwLow": "13",            // 明日の最低気温(℃)
              "tempTmrwHigh": "20"            // 明日の最高気温(℃)
            },
            // ... 他の都市の情報が続く ...
          ],
          "lastError": "" // データ取得中に最後に発生したエラーメッセージ (なければ空)
        }
        ```

## コード構成

* `main.go`: Go言語で書かれたバックエンドAPIサーバーの全コード。
* `index.html`: HTMLの構造、CSSによるスタイリング、JavaScriptによるAPIアクセスと画面表示ロジックを含むフロントエンドのファイル。

## 今後の改善点 (アイデア)

このプロジェクトは基本的な機能を実装していますが、さらに以下のような改善や機能追加が考えられます。

* **フロントエンド**:
    * 都市選択/フィルタリング機能の追加。
    * 降水確率、風、週間予報など、表示情報の拡充。
    * より洗練されたUI/UX（CSSフレームワークの導入、アニメーション等）。
    * ローディング表示やエラー表示の改善。
* **バックエンド**:
    * キャッシュ機構の導入（特にリクエストごとにデータを取得する場合）。
    * より詳細な地点コードでの天気情報取得への対応。
    * エラーハンドリングとロギングの強化。
* **その他**:
    * アプリケーションのデプロイ（Webサーバーへの公開）。
    * Goバックエンドのテストコード作成。